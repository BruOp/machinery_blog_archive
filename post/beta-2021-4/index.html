











<!DOCTYPE html>
<html lang="en">

<head>

<script type="text/javascript" src="../../_static/js/bundle-playback.js@v=KTqwAcYd" charset="utf-8"></script>

<script type="text/javascript">
  
  

</script>
<link rel="stylesheet" type="text/css" href="../../_static/css/banner-styles.css@v=fantwOh2.css" />
<link rel="stylesheet" type="text/css" href="../../_static/css/iconochive.css@v=qtvMKcIJ.css" />
<!-- End Wayback Rewrite JS Include -->

  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/manifest.json">
  <link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="../../images/favicon.ico">
  <link rel="apple-touch-icon" href="../../images/apple-touch-icon.png"/>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="description" content="Release notes for the April 2021 release!"/>
  

  
  <meta name="twitter:card" content="summary_large_image"/>
  
  
  <meta name="twitter:image" content="../../images/beta_21_4__triggers.png"/>
  
  <meta name="twitter:title" content="The Machinery Beta — April 2021 (version 2021.4)">
  <meta name="twitter:description" content="Release notes for the April 2021 release!"/>
  
  <meta name="twitter:site" content="@ourmachinery"/>

  
  <meta property="og:title" content="The Machinery Beta — April 2021 (version 2021.4) · Our Machinery"/>
  <meta property="og:site_name" content="Our Machinery"/>
  <meta property="og:url" content=" ../../post/beta-2021-4/"/>
  
  <meta property="og:image" content="../../images/beta_21_4__triggers.png"/>
  
  
  <meta property="og:description" content="Release notes for the April 2021 release!"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content=" 2021-04-29T00:00:00Z"/>
  

  <title>The Machinery Beta — April 2021 (version 2021.4) &middot; Our Machinery</title>

  

  
  
  <link type="text/css" rel="stylesheet" href="../../css/bootstrap.min.css" integrity="" print"/>
  <link type="text/css" rel="stylesheet" href="../../css/style.min.css" integrity="" print"/>
  

  
  
  <link href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/index.xml" rel="alternate" type="application/rss+xml" title="Our Machinery"/>
  

  <link rel="canonical" href="index.html"/>

  
  
  <script>

      
    
    

  </script>
  

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>

  
  <link rel="stylesheet" href="../../cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/default.min.css">
  <script src="../../cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  
  
  <script type="text/javascript" src="../../js/bootstrap.bundle.min.js" integrity=""></script>
  <script type="text/javascript" src="../../js/page.min.js" integrity=""></script>
  
  
  








<script type="application/ld+json">
{
    "@context": "http://web.archive.org/web/20210804201910/https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "url":"http:\/\/web.archive.org\/web\/20210804201910\/https:\/\/ourmachinery.com\/",
        "email":"ping@ourmachinery.com",
        "image": {
            "@type": "ImageObject",
            "url": "/images/full-logo.png"
        },
        "name":"Our Machinery",
        "description":""
    },
    "author": {
        "@type": "Person",
        "name": "The Machinery Team",
        "email": "ping@ourmachinery.com",
        
        "website":"http:\/\/web.archive.org\/web\/20210804201910\/https:\/\/ourmachinery.com\/"
        
        
        
    },
    "headline": "The Machinery Beta — April 2021 (version 2021.4)",
    "name": "The Machinery Beta — April 2021 (version 2021.4)",
    "wordCount":  1317 ,
    "timeRequired": "PT7M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": "en"
    },
    "url": " ../../post/beta-2021-4/",
    "datePublished": "2021-04-29T00:00Z",
    "dateModified": "2021-04-29T00:00Z",
    
    "image": {
        "@type": "ImageObject",
        "url": "http://web.archive.org/web/20210804201910/https://ourmachinery.com/beta_21_4__triggers.png"
    },
    
    
    "description": "Release notes for the April 2021 release!"
}
    </script>


</head>
<body class="d-flex flex-column min-vh-100">
       <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="../../">
          <img src="../../images/full-logo.png" alt="Our Machinery Logo" width="250" height="75">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar" aria-controls="sidebar-1" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="d-none d-lg-block" id="navbarCollapse">
          <ul class="navbar-nav  ms-auto mb-2 mb-md-0 align-items-center">
            
            
            <li>
            <li class="nav-item">
               
            </li>
            </li>
            
            
            
            <li>
            <li class="nav-item">
               
            </li>
            </li>
            
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle " id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                About
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/product.html" aria-label="Link The Machinery">The Machinery</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/about.html" aria-label="Link About Us">About Us</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/press.html" aria-label="Link Press Kit">Press Kit</a>
                </li>
                
              </ul>
            </li>
            
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle " id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Learning &amp; Support
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/apidoc.html" aria-label="Link API Documentation" target="_blank">API Documentation</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/tutorials/" aria-label="Link Tutorials">Tutorials</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/videos.html" aria-label="Link Videos">Videos</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/samples.html" aria-label="Link Sample Projects">Sample Projects</a>
                </li>
                
                <li>
                  <a class="dropdown-item " href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues" aria-label="Link Issue Tracker" target="_blank">Issue Tracker</a>
                </li>
                
              </ul>
            </li>
            
            
            
             
            
            
            
            <li class="nav-item dropdown" style="height:40px;min-width:58px;">
              <a class="text-yellow fs-1 signed-in-only" style="line-height: 1;" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <ion-icon name="person-circle-outline"></ion-icon>
              </a>
              <a class="text-yellow fs-1 signed-out-only" style="line-height: 1;" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <ion-icon name="log-in-outline"></ion-icon>
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item signed-out-only d-flex align-items-center" href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/sign-in.html">Sign In <ion-icon class="ms-auto" name="log-in-outline"></ion-icon></a></li>
                <li><a class="dropdown-item signed-out-only d-flex align-items-center" href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/sign-up.html">Sign Up <ion-icon class="ms-auto" name="create-outline"></ion-icon></a></li>
                <li><a class="dropdown-item signed-in-only d-flex align-items-center" href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/profile.html">Profile <ion-icon class="ms-auto" name="person-outline"></ion-icon></a></li>
                <li><a class="dropdown-item signed-in-only d-flex align-items-center" role="button" onclick="signOut(); return false;">Sign Out <ion-icon class="ms-auto" name="log-out-outline"></ion-icon></a></li>
              </ul>
            </li>
            
          </ul>
        </div>
      </div>


      <div id="sidebar" tabindex="-1" role="dialog" aria-modal="false" class="b-sidebar b-sidebar-right collapse shadow bg-dark text-light vh-100">
        <header class="b-sidebar-header">
          <button type="button" aria-label="Close" class="fs-1 btn btn-default text-light float-start" data-bs-toggle="collapse" data-bs-target="#sidebar" aria-controls="sidebar-1" aria-expanded="false" aria-label="Toggle navigation">
          <span class="icon icon-close"></span>
        </button>
        <div class=" d-flex justify-content-center">
        <a href="../../"><img src="../../images/full-logo.png" class="om-logo p-2 mb-2 mt-2" alt="Our Machinery Logo" width="100" height="75"></a>
  </div>
      </header>
          <div class="b-sidebar-body overflow-auto">
            <div class="card text-primary">
              
              <div class="card-body d-flex justify-content-center signed-out-only">
                <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/sign-in.html" aria-label="Login" class="btn btn-outline-primary me-2" style="flex: 1;"><span class="icon icon-user align-middle"></span> <span class="align-middle text-uppercase font-monospace">Sign In</span></a>
                <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/sign-up.html" aria-label="Register Account" class="btn btn-outline-primary" style="flex: 1;"><span class="icon icon-edit align-middle"></span> <span class="align-middle text-uppercase font-monospace">Sign Up</span></a>
              </div>
              
              <div class="card-body d-flex justify-content-center signed-in-only">
                <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/profile.html" aria-label="Open Profile" class="btn btn-outline-primary me-2 d-flex" style="max-height: 56; min-height: 56px;"><span class="align-middle align-self-center text-uppercase font-monospace">Profile</span></a>
                <a onclick="signOut(); return false;" class="btn btn-outline-primary  d-flex" style="max-height: 56; min-height: 56px;"><span class="icon icon-lock align-middle align-self-center"></span> <span class="align-middle align-self-center text-uppercase font-monospace">Logout</span></a>
              </div>
            </div>
            <div class="accordion mt-0" id="accordion-menu">
              
              
              
              
              
              
                <div class="accordion-item  bg-light">
                  <h2 class="accordion-header" id="heading-id2">
                    <button class="accordion-button bg-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-id2" aria-expanded="false" aria-controls="#collapse-id2">
                      About
                    </button>
                  </h2>
                  <div id="collapse-id2" class="accordion-collapse collapse" aria-labelledby="heading-id2" data-bs-parent="#accordion-menu">
                    <div class="accordion-body p-0">
                      <div class="list-group border-0">
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/product.html">The Machinery</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/about.html">About Us</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/press.html">Press Kit</a>
                        
                      </div>
                    </div>
                  </div>
                </div>
                
              
              
                <div class="accordion-item  bg-light">
                  <h2 class="accordion-header" id="heading-id3">
                    <button class="accordion-button bg-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-id3" aria-expanded="false" aria-controls="#collapse-id3">
                      Learning &amp; Support
                    </button>
                  </h2>
                  <div id="collapse-id3" class="accordion-collapse collapse" aria-labelledby="heading-id3" data-bs-parent="#accordion-menu">
                    <div class="accordion-body p-0">
                      <div class="list-group border-0">
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/apidoc.html">API Documentation</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/tutorials/">Tutorials</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/videos.html">Videos</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/samples.html">Sample Projects</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues">Issue Tracker</a>
                        
                      </div>
                    </div>
                  </div>
                </div>
                
              
              
                <div class="accordion-item  bg-light">
                  <h2 class="accordion-header" id="heading-id4">
                    <button class="accordion-button bg-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-id4" aria-expanded="false" aria-controls="#collapse-id4">
                      Community
                    </button>
                  </h2>
                  <div id="collapse-id4" class="accordion-collapse collapse" aria-labelledby="heading-id4" data-bs-parent="#accordion-menu">
                    <div class="accordion-body p-0">
                      <div class="list-group border-0">
                        
                          <a class="list-group-item list-group-item-action border-0 " href=" ../../post/">Blog</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://discord.gg/SHHSZaH">Discord</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/discussions">Forum</a>
                        
                          <a class="list-group-item list-group-item-action border-0 " href="http://web.archive.org/web/20210804201910/https://anchor.fm/ourmachinery">Podcast</a>
                        
                      </div>
                    </div>
                  </div>
                </div>
                
              
            </div>
    </div>
  
    <footer class="b-sidebar-footer w-100">
      <div class="d-flex flex-row">
        <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/tutorials/" aria-label="Opens Tutorial" type="button" class="btn btn-outline-light m-1" style="flex: 1"> <span class="align-middle text-uppercase font-monospace">Tutorials</span></a>
        <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/apidoc.html" aria-label="Opens API Documentation" type="button" class="btn btn-outline-light m-1" style="flex: 1"> <span class="align-middle text-uppercase font-monospace">Documentation</span></a>
    </div>

    
 

 
  </footer>
  
    </div>

    </nav>
  <main>


<section class="mt-5 container">

  <article class="post">
    <header class="post-blog mx-auto">
      <div class="mb-5 clearfix" role="group" aria-label="Basic example">
          <a href=" ../../" type="button" class="btn btn-primary float-start">
            <ion-icon name="chevron-back-outline" class="align-middle" style="padding-right:0.2em"></ion-icon> <span class="align-middle">All Blogs</span>
          </a>
          <div class="float-end">
          
           
        </div>
        </div>
      </div>

      <div class="d-grid d-md-flex gap-2 pb-3 pb-md-0 mb-2">
        <div class="flex-grow-1">
          <h1>The Machinery Beta — April 2021 (version 2021.4)</h1>
        </div>
      </div>

      <p>
        <time class="post-date" datetime=" 2021-04-29T00:00:00Z">
          Apr 29, 2021
        </time>
      </p>



    </header>

    <section class="text-break post-blog mx-auto">
      <p>It’s that time again! A new month and a new The Machinery release. Hope you are enjoying the longer,
sunnier days, as well as our new additions!</p>
<p>If you are already running The Machinery, this new release should pop up in your <em>Downloads</em> tab.
Otherwise, get it from our <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/beta.html">beta download page</a> and have a look
at this quick <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/beta.html">introduction video</a>. If you find bugs in this
release or have requests for specific features, post them to our <a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues">issue
tracker</a>. For more general discussions,
hit us up on the <a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/discussions">forum</a> or
<a href="http://web.archive.org/web/20210804201910/https://discord.gg/HGvGRhy3">Discord</a>.</p>
<p>Key highlights in this release are:</p>
<ul>
<li><a href="index.html#animation-triggers">Animation Triggers</a></li>
<li><a href="index.html#ui-components">UI Components</a></li>
</ul>
<p>As always, we also have a number of <a href="index.html#rendering">smaller updates</a>.</p>
<h2 id="animation-triggers">Animation Triggers</h2>
<p>The animation system now has support for <em>Triggers</em>. Triggers are labelled points in an animation
that can be connected to outside events:</p>
<figure class="figure d-block">
    <img class="figure-img img-fluid rounded d-block" alt="Adding triggers to an animation." src="../../images/beta_21_4__triggers.png"/>
    <figcaption class="figure-caption fs-5">
        <h4>Adding triggers to an animation.</h4>
    </figcaption>
  </figure>
<p>You can query for triggers that happened in the last frame using <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/animation/animation_state_machine.h.html#structtm_animation_state_machine_api.triggers()"><code>tm_animation_state_machine_api-&gt;triggers()</code></a> or you can hook triggers up to actions using our visual scripting language:</p>
<figure class="figure d-block">
    <img class="figure-img img-fluid rounded d-block" alt="Triggers in the visual scripting graph." src="../../images/beta_21_4__triggers_in_graph.png"/>
    <figcaption class="figure-caption fs-5">
        <h4>Triggers in the visual scripting graph.</h4>
    </figcaption>
  </figure>
<h2 id="ui-components">UI Components</h2>
<p>We are working on a new plugin for in-game UIs. This plugin allows you to add UI controls using the
Editor and the Entity Component System.  You can experiment with it by enabling the <code>UI Components</code>
feature flag.</p>
<p>UI controls are implemented as <em>UI Element</em> components that belong to an <em>UI Canvas</em> component. The
<em>UI Canvas</em> component lets you select whether it should be rendered in screen space or world space
together with some other options. <em>Screen space</em> UIs are your traditional 2D UIs with menu options
for the game, etc. <em>World space</em> UIs are UIs that are positioned in the 3D world, such as text on a
wall.</p>
<p>When a <em>UI Canvas</em> is rendered it will gather all the <em>UI Element</em> components found in its child
elements and render them:</p>
<figure class="figure d-block">
    <img class="figure-img img-fluid rounded d-block" alt="UI Components hierarchy." src="../../images/beta_21_4__ui_components.png"/>
    <figcaption class="figure-caption fs-5">
        <h4>UI Components hierarchy.</h4>
    </figcaption>
  </figure>
<p>Here’s an example of what UI elements positioned in world space can look like.</p>
<figure class="figure d-block">
    <img class="figure-img img-fluid rounded d-block" alt="Interaction System sample with additional UI Controls." src="../../images/beta_21_4__world_ui.png"/>
    <figcaption class="figure-caption fs-5">
        <h4>Interaction System sample with additional UI Controls.</h4>
    </figcaption>
  </figure>
<p>The <em>UI elements</em>  have a basic API that you can use to get the corresponding <code>tm_ui_*_t</code> control
and the state of interaction for the current frame.</p>
<p>Note that in addition to using the UI entity system, it is also possible to create UIs directly from
code, using our IMGUI model.</p>
<hr>
<h2 id="rendering">Rendering</h2>
<ul>
<li>Fix for crash when destroying cubemaps. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/536">#536</a>] [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/535">#535</a>] [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/530">#530</a>] [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/527">#527</a>]</li>
<li>Proper cleanup of cubemap images.</li>
<li>Fix for crash when deleting sun entity.</li>
<li>Fix for ringing artifact in rendering. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/531">#531</a>]</li>
<li>Fix for bug when connecting Position node to Base Color node. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/541">#541</a>]</li>
<li>Fix for Atmospheric Sky overwriting sun light color / intensity.</li>
<li>Fixed crash when using timestamps on non-graphics queue.</li>
<li>Added ability to set native color space for swapchains.</li>
<li>Renamed <code>.shader</code> files to <code>.tmsl</code>.</li>
<li>Added Visual Studio <a href="http://web.archive.org/web/20210804201910/https://marketplace.visualstudio.com/items?itemName=OurMachinery.tmShaderLang">extension</a> for shader language syntax highlighting.</li>
<li>Fix for <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/renderer/render_command_buffer.h.html#structtm_renderer_command_buffer_api.copy_image()"><code>tm_renderer_command_buffer_api-&gt;copy_image()</code></a> not respecting mip maps.</li>
<li>Fix for rare threading issue in GPU resource readback mechanic.</li>
<li>Fix for incorrect resource barrier when doing in-place mipmap filtering.</li>
<li><a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/render_utilities/render_component.h.html#structtm_render_component_api.set_culling_enable()"><code>tm_render_component_api-&gt;set_culling_enable()</code></a> can be used to programmatically enable/disable view frustum culling.</li>
<li>Fix for rectangles rendered using <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/render_utilities/primitive_drawer.h.html#structtm_primitive_drawer_api.stroke_rect()"><code>tm_primitive_drawer_api-&gt;stroke_rect()</code></a> being 2x too big.</li>
<li><a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/shader_system/shader_system.h.html#structtm_shader_api.shader_version()"><code>tm_shader_api-&gt;shader_version()</code></a> and <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/shader_system/shader_system.h.html#structtm_shader_api.system_version()"><code>tm_shader_api-&gt;system_version()</code></a> are two new functions that returns a version number that can be tracked to verify if cached constant buffer- and resource binder instances needs to be updated.</li>
</ul>
<h2 id="editor">Editor</h2>
<ul>
<li>Fix for crash when importing OBJ files.</li>
<li>Fix for icon clipping. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/534">#534</a>]</li>
<li>Fix for crash when opening projects from the Download tab. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/524">#524</a>]</li>
<li>Fix for bug where selection occurred after gizmo was moved, thereby selecting a different object. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/539">#539</a>] [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/533">#533</a>]</li>
<li>Fix for log messages missing from log file. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/538">#538</a>]</li>
<li>Fix for crash when log is cleared after a reload. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/548">#548</a>]</li>
<li>Added icon to show volume component support in Property tab.</li>
<li>UI theme editor now supports changing color alpha.</li>
<li>UI theme editor has colors separated in groups.</li>
<li>All selection actions in the asset browser now happen when the mouse button is released.</li>
<li><em>Copy</em> in the <em>Console</em> tab now copies the full log if nothing is selected.</li>
</ul>
<h2 id="build">Build</h2>
<ul>
<li>Fix for “New Plugin” code not compiling. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/545">#545</a>]</li>
<li>Fix for hang in <code>tmbuild</code> trying to execute <code>vswhere</code>. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/525">#525</a>]</li>
</ul>
<h2 id="documentation">Documentation</h2>
<ul>
<li>The Readme and the Guidebook are now in the API documentation.</li>
<li>Added predefined macros to the shader system reference</li>
</ul>
<h2 id="entities">Entities</h2>
<ul>
<li>Fix for bug causing an infinite loop in <code>notify_event()</code>.</li>
</ul>
<h2 id="preview-tab">Preview tab</h2>
<ul>
<li>The preview tab no longer uses the DCC asset component, instead it shows an entity that is rigged the same way as if the user presses “extract assets”. This makes the preview entity and the extracted entity behave similarly while also decreasing GPU memory use.</li>
</ul>
<h2 id="graph">Graph</h2>
<ul>
<li>It is now possible to pan and zoom the graph while dragging a connection, moving nodes or making a selection.</li>
</ul>
<h2 id="creation-graph">Creation graph</h2>
<ul>
<li>Creation graph prototypes are now always compiled before instances, ensuring any state contained inside the prototype that the instance depends on to be available. This fixes an issue were buffers could occasionally become duplicated on disk.</li>
<li>The new <code>Get Instance</code> node allows you to get a graph instance from a component on the current entity, or another entity. The component should implement the aspect <code>TM_CI_CREATION_GRAPH_INSTANCE_PROVIDER</code> in order to appear in the node.</li>
<li>The new <code>Create Instance</code> node allows you to create an instance of a graph. The difference from the older <code>Import</code> node is that it doesn’t automatically read any outputs from the instance.</li>
<li>The new <code>Read Instance Output</code> can be combined with <code>Get Instance</code> or <code>Create Instance</code> nodes to read named outputs from a graph instance. The outputs need to be named using the <code>Output</code> node in the graph from which you are trying to read the outputs.</li>
<li>Fixed a bug where The Machinery could crash if too many Creation Graph were changed at the same time.</li>
<li><code>Filter Image</code> node can now also take an <code>Image</code> as input and do filter operations in-place directly in the resulting <code>GPU Image</code>.</li>
<li><code>Filter Image</code> node now has a Storage Policy to indicate if the filtered result should be shared between all instances (cached as part of the node) or instantiated for each instance of the creation graph.</li>
<li>Fix for <code>Compress Image</code> node not respecting mip chains.</li>
<li>We now keep track of in-flight execution of instances and make sure they finish before destroying the interpreter.</li>
<li><code>GPU Image → Image</code> node now optionally supports releasing the input <code>GPU Image</code> after the readback has completed.</li>
<li>The <code>TM_CREATION_GRAPH_EVENT_NODE_OUTPUT</code> event is now triggered on the <code>default instance</code> immediately after the compile of the graph has finished</li>
<li>Support for optional <code>run_dependencies()</code> node callback that can be used to decide if a node that caches its result needs to run its dependencies or not.</li>
<li>Image nodes writing to shared resources now uses the <code>run_dependencies()</code>  mechanism to determine what parts of the graph that needs to run based on validity hash tracking.</li>
<li><code>debug_tag</code>  of GPU images created by creation graphs now uses the resource name of the creation graph (if any) to make it easier to track down memory ownership in the Device Memory Analyzer view.</li>
</ul>
<h2 id="entity-graph">Entity Graph</h2>
<ul>
<li>Support for <code>vec2</code>, <code>vec3</code>, and <code>vec4</code> <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/expression_language/expression_language.h.html#expression_language.h">Expression Language</a> graph nodes.</li>
<li>Events, Subgraphs, Input and Output nodes now indicate their activity.</li>
<li>Added support to watch wire data.</li>
<li>Facelift for the Graph Component Property View.</li>
</ul>
<h2 id="sculpt-component">Sculpt Component</h2>
<ul>
<li>Fix for sculpt component not working.</li>
</ul>
<h2 id="math">Math</h2>
<ul>
<li>Support for <code>tm_vec4_t</code> in the <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/expression_language/expression_language.h.html#expression_language.h">Expression Language</a>.</li>
</ul>
<h2 id="api">API</h2>
<ul>
<li><code>type_hash</code> is now enforced for subobjects and references.</li>
<li><a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/ui/ui.h.html#structtm_ui_api.set_active()"><code>tm_ui_api-&gt;set_active()</code></a> now has safety checks to avoid using data of the wrong type.</li>
<li><a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/editor_views/asset_browser.h.html#structtm_asset_save_i.status()"><code>tm_asset_save_i-&gt;status()</code></a> now correctly determines the status of assets in a directory project. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/485">#485</a>]</li>
</ul>
<h2 id="ui">UI</h2>
<ul>
<li><a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/apidoc/plugins/ui/ui.h.html#structtm_ui_api.textedit()"><code>tm_ui_api-&gt;textedit()</code></a> now takes the size of the buffer instead of the length in glyphs. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/518">#518</a>]</li>
<li>When editing RGBA colors, the alpha component is now inside the expanded picker instead of  outside.</li>
</ul>
<h2 id="projects">Projects</h2>
<ul>
<li>The migration index is now sorted in the saved data. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/470">#470</a>]</li>
</ul>
<h2 id="plugins">Plugins</h2>
<ul>
<li>Fix for errors sometimes happening when reloading plugins. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/537">#537</a>]</li>
</ul>
<h2 id="hotfix-20214a">Hotfix 2021.4.a</h2>
<ul>
<li>Fix for Add Component button in Properties view not working. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/552">#552</a>]</li>
<li>Fix for error when selecting the Scale tool in the Scene tab. [<a href="http://web.archive.org/web/20210804201910/https://github.com/OurMachinery/themachinery-public/issues/553">#553</a>]</li>
</ul>

      


<section>
  <h5>by <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/authors/team" class="text-decoration-none">The Machinery Team</a></h5>
</section>


    </section>
    <footer class="mt-5 mb-5">
      <hr>

      <div class="d-flex">
    <div class="me-auto">
        <a href=" ../../post" type="button" class="btn btn-primary">
            <ion-icon name="chevron-back-outline" class="align-middle" style="padding-right:0.2em"></ion-icon> <span class="align-middle">All Blogs</span>
        </a>
    </div>
    
    <a class="icon icon-twitter me-1" style="font-size: 1.2em" href="http://web.archive.org/web/20210804201910/https://twitter.com/share?text=The%20Machinery%20Beta%20%e2%80%94%20April%202021%20%28version%202021.4%29 - Our%20Machinery&amp;url=https%3a%2f%2fourmachinery.com%2fpost%2fbeta-2021-4%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon icon-pinterest me-1" style="font-size: 1.2em" href="http://web.archive.org/web/20210804201910/https://pinterest.com/pin/create/button/?url=https%3a%2f%2fourmachinery.com%2fpost%2fbeta-2021-4%2f&amp;description=The%20Machinery%20Beta%20%e2%80%94%20April%202021%20%28version%202021.4%29" onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
        <span class="hidden">Pinterest</span>
    </a>
    
</div>

      <div class="mt-5">
        

<p>The comment system uses a session cookie to keep track of your signed-in status. This cookie is
created when you sign in with GitHub. If you don't sign in, no cookie is created.</p>




      </div>

      
      <div class="container mb-5 mt-5">
        <div class="row">
          <h3>Previous Posts</h3>
          <hr>
        </div>
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
          
              <div class="col">
              <div class="card om-post-preview shadow-sm">
                
                <div class="card-body">
                  <h5 class="card-title"><a class="text-decoration-none" href=" ../../post/dig-shallow-graves/">Dig Shallow Graves</a></h5>
                  <h6 class="card-subtitle mb-2 text-muted">
                    <time class="post-date" datetime=" 2021-04-08T00:00:00Z">
                      8 Apr 2021
                    </time>
                  </h6>
                  <p class="card-text"><p>Recently I’ve been trying to help our interns with API design and I figured I should write something
about it.</p>
<p>If I have …</p></p>
                </div>
                <div class="d-flex justify-content-between align-items-center p-2">
                  <div class="btn-group">
                    <a href=" ../../post/dig-shallow-graves/" type="button" class="btn btn-lg btn-outline-primary">Read</a>
                  </div>
                  <small class="text-muted">17 min</small>
                </div>
              </div>
        </div>
         <div class="col">
              <div class="card om-post-preview shadow-sm">
                
                <a href=" ../../post/beta-2021-3/" class="text-decoration-none"><img src="../../images/beta_21_3__sky_component.png" class="card-img-top" alt="The Machinery Beta — March 2021 (version 2021.3)"></a>
                
                <div class="card-body">
                  <h5 class="card-title"><a class="text-decoration-none" href=" ../../post/beta-2021-3/">The Machinery Beta — March 2021 (version 2021.3)</a></h5>
                  <h6 class="card-subtitle mb-2 text-muted">
                    <time class="post-date" datetime=" 2021-03-31T00:00:00Z">
                      31 Mar 2021
                    </time>
                  </h6>
                  <p class="card-text"><p>Happy anniversary, The Machinery!</p>
<p>It’s hard to believe it’s been a full year since our <a href=" ../../post/beta/">first beta
release</a>. With the …</p></p>
                </div>
                <div class="d-flex justify-content-between align-items-center p-2">
                  <div class="btn-group">
                    <a href=" ../../post/beta-2021-3/" type="button" class="btn btn-lg btn-outline-primary">Read</a>
                  </div>
                  <small class="text-muted">13 min</small>
                </div>
              </div>
        </div>
         <div class="col">
              <div class="card om-post-preview shadow-sm">
                
                <div class="card-body">
                  <h5 class="card-title"><a class="text-decoration-none" href=" ../../post/porting-the-machinery-to-linux/">Porting The Machinery to Linux</a></h5>
                  <h6 class="card-subtitle mb-2 text-muted">
                    <time class="post-date" datetime=" 2021-03-08T00:00:00Z">
                      8 Mar 2021
                    </time>
                  </h6>
                  <p class="card-text"><p>Hi, my name is Raphael, and I&rsquo;m an intern at Our Machinery.</p>
<p>I&rsquo;m a Linux user and passionate about Game …</p></p>
                </div>
                <div class="d-flex justify-content-between align-items-center p-2">
                  <div class="btn-group">
                    <a href=" ../../post/porting-the-machinery-to-linux/" type="button" class="btn btn-lg btn-outline-primary">Read</a>
                  </div>
                  <small class="text-muted">7 min</small>
                </div>
              </div>
        </div>
        
      </div>
      </div>
    </footer>
  </article>

</section>

</main>

<footer class="container-fluid mt-auto page-footer-bg">
    <div class="mx-auto d-flex justify-content-center w-100 pt-5 pb-5">
        <img alt="trees" src=" ../../post/beta-2021-4/&#32;https:/ourmachinery.com/images/trees.png" style="height: 84.38px; width: 150px;">
    </div>
    <div class="page-info">
        <p class="float-end">
            
            <a href="http://web.archive.org/web/20210804201910/https://twitter.com/ourmachinery" target="_blank" class="icon icon-twitter fs-4"></a>
            
            <a href="http://web.archive.org/web/20210804201910/https://instagram.com/ourmachinery" target="_blank" class="icon icon-instagram fs-4"></a>
            
            <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/index.xml" target="_blank" class="icon icon-feed fs-4"></a>
            
            <a href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/cdn-cgi/l/email-protection#22524b4c45624d57504f43414a4b4c47505b0c414d4f" target="_blank" class="icon icon-mail fs-4"></a>
            
        </p>
        <p>&copy; Our Machinery 2021 <a style="text-decoration:none; margin-left:1em;" href="http://web.archive.org/web/20210804201910/https://ourmachinery.com/privacy.html">Privacy Policy</a></p>
    </div>
</footer>

<script type="module" src="../../unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule="" src="../../unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.js"></script>
</body>

</html><!--
     FILE ARCHIVED ON 20:19:10 Aug 04, 2021 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 00:51:52 Aug 01, 2022.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 80.907
  exclusion.robots: 0.143
  exclusion.robots.policy: 0.132
  RedisCDXSource: 6.245
  esindex: 0.01
  LoadShardBlock: 56.04 (3)
  PetaboxLoader3.datanode: 73.87 (4)
  CDXLines.iter: 15.484 (3)
  load_resource: 102.717
  PetaboxLoader3.resolve: 64.515
-->